<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS面试题-零散知识点 | 夕航</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="前端学习笔记">
    <meta name="author" content="夕航">
    <meta name="keywords" content="前端">
    
    <link rel="preload" href="/docs/assets/css/0.styles.52bb2005.css" as="style"><link rel="preload" href="/docs/assets/js/app.09d10d22.js" as="script"><link rel="preload" href="/docs/assets/js/5.2d095b72.js" as="script"><link rel="preload" href="/docs/assets/js/27.a9c08176.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e282c734.js"><link rel="prefetch" href="/docs/assets/js/11.d7e26b9e.js"><link rel="prefetch" href="/docs/assets/js/12.b841f052.js"><link rel="prefetch" href="/docs/assets/js/13.dc5aeac1.js"><link rel="prefetch" href="/docs/assets/js/14.60c39f06.js"><link rel="prefetch" href="/docs/assets/js/15.c4090a9d.js"><link rel="prefetch" href="/docs/assets/js/16.b82bdcb1.js"><link rel="prefetch" href="/docs/assets/js/17.99236714.js"><link rel="prefetch" href="/docs/assets/js/18.14c2d49c.js"><link rel="prefetch" href="/docs/assets/js/19.d02bbe47.js"><link rel="prefetch" href="/docs/assets/js/2.93ef2c17.js"><link rel="prefetch" href="/docs/assets/js/20.9e98372f.js"><link rel="prefetch" href="/docs/assets/js/21.42e19db8.js"><link rel="prefetch" href="/docs/assets/js/22.fef0060f.js"><link rel="prefetch" href="/docs/assets/js/23.81874084.js"><link rel="prefetch" href="/docs/assets/js/24.90483c50.js"><link rel="prefetch" href="/docs/assets/js/25.4cccfb01.js"><link rel="prefetch" href="/docs/assets/js/26.5c9d1ddf.js"><link rel="prefetch" href="/docs/assets/js/28.63eab0b6.js"><link rel="prefetch" href="/docs/assets/js/29.beda502f.js"><link rel="prefetch" href="/docs/assets/js/3.c17983c0.js"><link rel="prefetch" href="/docs/assets/js/30.f395372d.js"><link rel="prefetch" href="/docs/assets/js/31.e809f027.js"><link rel="prefetch" href="/docs/assets/js/32.39b2d9fa.js"><link rel="prefetch" href="/docs/assets/js/33.ad475418.js"><link rel="prefetch" href="/docs/assets/js/34.b527ccb6.js"><link rel="prefetch" href="/docs/assets/js/35.4d3075ff.js"><link rel="prefetch" href="/docs/assets/js/36.e906c045.js"><link rel="prefetch" href="/docs/assets/js/37.cb809e5d.js"><link rel="prefetch" href="/docs/assets/js/38.b937dc87.js"><link rel="prefetch" href="/docs/assets/js/39.f9a8c19b.js"><link rel="prefetch" href="/docs/assets/js/4.01881906.js"><link rel="prefetch" href="/docs/assets/js/6.5dbe11a1.js"><link rel="prefetch" href="/docs/assets/js/7.e7b95553.js"><link rel="prefetch" href="/docs/assets/js/8.042a8261.js"><link rel="prefetch" href="/docs/assets/js/9.e326f00f.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.52bb2005.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="夕航" class="logo"> <span class="site-name can-hide">夕航</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  前言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/network/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/docs/algorithm/" class="nav-link">
  数据结构与算法
</a></li></ul></div></div><div class="nav-item"><a href="/docs/interview/interview.html" class="nav-link">
  面试总结
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  前言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/docs/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/network/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/docs/algorithm/" class="nav-link">
  数据结构与算法
</a></li></ul></div></div><div class="nav-item"><a href="/docs/interview/interview.html" class="nav-link">
  面试总结
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/js/" aria-current="page" class="sidebar-link">待解决问题</a></li><li><a href="/docs/js/js_ks/js_ks.html" class="sidebar-link">JS知识点总结</a></li><li><a href="/docs/js/js_patch/js_patch.html" aria-current="page" class="active sidebar-link">JS面试题-零散知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_1-js各种宽度高度的理解和获取" class="sidebar-link">1. JS各种宽度高度的理解和获取</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_2-几种不同的js设计模式" class="sidebar-link">2. 几种不同的js设计模式</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_3-继承的实现方式-es6的class继承" class="sidebar-link">3. 继承的实现方式，ES6的class继承？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_4-手写new-apply-bind" class="sidebar-link">4. 手写new,apply,bind</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_5-操作dom的常用方式" class="sidebar-link">5. 操作DOM的常用方式</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_6-sum-求和那个题怎么做" class="sidebar-link">6.sum()求和那个题怎么做？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_7-load时间和domcontentloaded事件的区别" class="sidebar-link">7.load时间和Domcontentloaded事件的区别</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_8-深浅拷贝" class="sidebar-link">8.深浅拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_9-防抖和节流的实现" class="sidebar-link">9.防抖和节流的实现</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_10-事件的传播机制-怎么使用冒泡" class="sidebar-link">10.事件的传播机制，怎么使用冒泡？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_11-事件委托" class="sidebar-link">11.事件委托</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_12-js的数据类型和检验" class="sidebar-link">12.JS的数据类型和检验</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_13-promise-all-race的实现" class="sidebar-link">13.promise.all .race的实现</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_14-sleep函数的实现" class="sidebar-link">14.sleep函数的实现</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_17-什么是类数组和类数组的转化" class="sidebar-link">17.什么是类数组和类数组的转化</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_18-数组去重" class="sidebar-link">18. 数组去重</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_19-怎么取消事件的默认行为" class="sidebar-link">19. 怎么取消事件的默认行为？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_20-手写ajax" class="sidebar-link">20. 手写Ajax？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_21-jsonp的实现" class="sidebar-link">21. JsonP的实现？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_22-数组扁平化" class="sidebar-link">22. 数组扁平化？</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#_23-async-await-promise题目的练习" class="sidebar-link">23. Async await promise题目的练习</a></li><li class="sidebar-sub-header"><a href="/docs/js/js_patch/js_patch.html#读代码练习题" class="sidebar-link">读代码练习题</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js面试题-零散知识点"><a href="#js面试题-零散知识点" class="header-anchor">#</a> JS面试题-零散知识点</h1> <h2 id="_1-js各种宽度高度的理解和获取"><a href="#_1-js各种宽度高度的理解和获取" class="header-anchor">#</a> 1. JS各种宽度高度的理解和获取</h2> <p>看js知识总结</p> <h2 id="_2-几种不同的js设计模式"><a href="#_2-几种不同的js设计模式" class="header-anchor">#</a> 2. 几种不同的js设计模式</h2> <p>看知识总结</p> <h2 id="_3-继承的实现方式-es6的class继承"><a href="#_3-继承的实现方式-es6的class继承" class="header-anchor">#</a> 3. 继承的实现方式，ES6的class继承？</h2> <ol><li>Class</li></ol> <ul><li>有constructor和没有constructor的区别？
<ul><li>没有区别，函数会默认加一个</li> <li>所有实例属性可以直接写在最顶层不写在constructor里面</li></ul></li> <li>static关键字
<ul><li>有static  a = 12;关键字定义的是类上的属性，即函数上的属性</li></ul></li></ul> <ol start="2"><li>借用构造函数继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">son</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>问题：不能定义继承父类原型上的方法</p> <ol start="3"><li>组合继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">son</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

son<span class="token punctuation">.</span>pototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> son<span class="token punctuation">;</span>
</code></pre></div><p>构造函数继承父类属性，通过原型链继承方法，即把子类的原型定义为一个父类的实例。</p> <ol start="4"><li>原型式继承</li></ol> <p>Object.create(类,{额外属性})</p> <p>创建一个对象，这个对象的proto指向类的prototyoe,并且可以自定义额外属性。</p> <ol start="5"><li>寄生继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createASon</span><span class="token punctuation">(</span><span class="token parameter">father</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

​	<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">father</span><span class="token punctuation">;</span>

​	son<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

​	<span class="token keyword">return</span> son<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>寄生组合继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

father<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">son</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	son<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

son<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>father<span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> son<span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-手写new-apply-bind"><a href="#_4-手写new-apply-bind" class="header-anchor">#</a> 4. 手写new,apply,bind</h2> <ol><li>手写new</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>res <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span><span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>手写apply</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>$func <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">$func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>手写bind</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//注意返回的函数中也有可能有参数</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>inArgs</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>inArgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-操作dom的常用方式"><a href="#_5-操作dom的常用方式" class="header-anchor">#</a> 5. 操作DOM的常用方式</h2> <p>见知识总结</p> <h2 id="_6-sum-求和那个题怎么做"><a href="#_6-sum-求和那个题怎么做" class="header-anchor">#</a> 6.sum()求和那个题怎么做？</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//方法1:curry函数预处理</span>
<span class="token keyword">function</span> <span class="token function">curring</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>times</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        times<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>times <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 注意要用...</span>
            <span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//使用.bind保存参数，并且传到下一个函数闭包保存</span>
        <span class="token keyword">return</span> <span class="token function">curring</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span>times<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//注意要用...</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">curring</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方法2:改写toString函数</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">sum</span>  <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
sum<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_7-load时间和domcontentloaded事件的区别"><a href="#_7-load时间和domcontentloaded事件的区别" class="header-anchor">#</a> 7.load时间和Domcontentloaded事件的区别</h2> <ul><li><p>window.onload是整个页面（包括图片加载完成),</p></li> <li><p>Document中的DOMContentLoaded事件是DOM加载完成就触发</p></li></ul> <h2 id="_8-深浅拷贝"><a href="#_8-深浅拷贝" class="header-anchor">#</a> 8.深浅拷贝</h2> <p>深拷贝：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token operator">!</span>obj <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">'function'</span><span class="token operator">||</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span> <span class="token operator">||</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>浅拷贝只拷贝一层</p> <h2 id="_9-防抖和节流的实现"><a href="#_9-防抖和节流的实现" class="header-anchor">#</a> 9.防抖和节流的实现</h2> <p>防抖：在规定时间内再次触发重新计时</p> <p>节流：在规定时间内再次触发不重新计时</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fangdou</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//注意每次都清空</span>
    <span class="token function">clearTimeOut</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//注意要apply</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeOut</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//注意设置为null只是改变指向，并不能结束一个计时器</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">jieliu</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeOut</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-事件的传播机制-怎么使用冒泡"><a href="#_10-事件的传播机制-怎么使用冒泡" class="header-anchor">#</a> 10.事件的传播机制，怎么使用冒泡？</h2> <ol><li>捕获阶段</li> <li>目标阶段</li> <li>冒泡阶段</li></ol> <p>addEventListener('',func,false)</p> <p>第三个参数为false就是冒泡触发</p> <h2 id="_11-事件委托"><a href="#_11-事件委托" class="header-anchor">#</a> 11.事件委托</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">bindEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> type<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>func<span class="token punctuation">)</span><span class="token punctuation">{</span>
    func <span class="token operator">=</span> selector<span class="token punctuation">;</span>
    selector <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_12-js的数据类型和检验"><a href="#_12-js的数据类型和检验" class="header-anchor">#</a> 12.JS的数据类型和检验</h2> <ol><li><p>typeof</p></li> <li><p>instanceof</p></li> <li><p>Object.prototype.toString.call(obj);</p></li></ol> <p>返回[object Object/Array/RegExp/Date/Function/Null/Undefined/Number/String/Boolean/Symbol...]</p> <h2 id="_13-promise-all-race的实现"><a href="#_13-promise-all-race的实现" class="header-anchor">#</a> 13.promise.all .race的实现</h2> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
        ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">===</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
       <span class="token comment">//注意要写.catch </span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Promise<span class="token punctuation">.</span><span class="token function-variable function">race</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> errors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
        errors<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">===</span> length<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_14-sleep函数的实现"><a href="#_14-sleep函数的实现" class="header-anchor">#</a> 14.sleep函数的实现</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1.通过死循环</span>
<span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> cur <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cur <span class="token operator">&lt;</span> time<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//2.通过async await方式</span>
<span class="token keyword">function</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">setTimeOut</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">helper</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_17-什么是类数组和类数组的转化"><a href="#_17-什么是类数组和类数组的转化" class="header-anchor">#</a> 17.什么是类数组和类数组的转化</h2> <p>长得像数组的类，属性名是'0','1'....，有长度</p> <p>arguments就是类数组</p> <p>转化：</p> <p>Array.from(arguments);</p> <p>[].slice.call(arguments,0);</p> <h2 id="_18-数组去重"><a href="#_18-数组去重" class="header-anchor">#</a> 18. 数组去重</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//ES6</span>
<span class="token keyword">function</span> <span class="token function">deDuplicate</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ES5</span>
<span class="token keyword">function</span> <span class="token function">deDuplicate</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      map<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_19-怎么取消事件的默认行为"><a href="#_19-怎么取消事件的默认行为" class="header-anchor">#</a> 19. 怎么取消事件的默认行为？</h2> <ol><li>event.preventDefault();</li> <li>return false;</li> <li>href = 'javascript:;</li></ol> <h2 id="_20-手写ajax"><a href="#_20-手写ajax" class="header-anchor">#</a> 20. 手写Ajax？</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span>method</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span>url<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true为异步请求</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystateChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'404'</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'505'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'not Found'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_21-jsonp的实现"><a href="#_21-jsonp的实现" class="header-anchor">#</a> 21. JsonP的实现？</h2> <p>JsonP的原理就是通过script标签的跨域性发送请求，服务端返回一个已经写好了带了参数的callback函数，这个函数可以直接被浏览器执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token punctuation">,</span>callback<span class="token operator">=</span><span class="token string">'callback'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//首先处理url</span>
  <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  url <span class="token operator">+=</span> <span class="token string">'?'</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>
    url <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_22-数组扁平化"><a href="#_22-数组扁平化" class="header-anchor">#</a> 22. 数组扁平化？</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bianping</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> arr <span class="token operator">===</span> <span class="token string">'Object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">helper</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  	<span class="token function">helper</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_23-async-await-promise题目的练习"><a href="#_23-async-await-promise题目的练习" class="header-anchor">#</a> 23. Async await promise题目的练习</h2> <h2 id="读代码练习题"><a href="#读代码练习题" class="header-anchor">#</a> 读代码练习题</h2> <ol><li>做错</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/*阿里面试题*/</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    n<span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
b<span class="token punctuation">.</span>m <span class="token operator">=</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    n<span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{ n: 10, m: { n: 20 } }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{ n: 20 }</span>
</code></pre></div><p><strong>注意连等赋值是从左到右进行的，先进行b.m的赋值再进行b的赋值</strong> <strong>typeof typeof()才会从右向左</strong> <strong>同级运算优先级是从左到右****可以在MDN中查找 运算符优先级</strong></p> <ol start="2"><li></li></ol> <div class="language- extra-class"><pre class="language-text"><code>/*360面试题*/
let x = [12, 23];
function fn(y) {
    y[0] = 100;
    y = [100];
    y[1] = 200;
    console.log(y);
}
fn(x);
console.log(x);
//[ 100, 200 ]
//[ 100, 23 ]
</code></pre></div><ol start="3"><li></li></ol> <div class="language- extra-class"><pre class="language-text"><code>var x = 10;
~ function (x) {
    console.log(x);
    x = x || 20 &amp;&amp; 30 || 40;
    console.log(x);
}();
console.log(x);
</code></pre></div><ol start="4"><li></li></ol> <div class="language- extra-class"><pre class="language-text"><code>let x = [1, 2],
    y = [3, 4];
~ function (x) {
    x.push('A');
    x = x.slice(0);
    x.push('B');
    x = y;
    x.push('C');
    console.log(x, y);
}(x);
console.log(x, y);
</code></pre></div><p><strong>function(){}(x)意味着把x作为参数立即执行匿名函数</strong></p> <ol start="5"><li></li></ol> <div class="language- extra-class"><pre class="language-text"><code>let res = parseFloat('left:200px');
if(res===200){
   alert(200);
}else if(res===NaN){
   alert(NaN);
}else if(typeof res==='number'){
   alert('number');
}else{
   alert('Invalid Number');
}
</code></pre></div><p><strong>这是一个NaN与其他值都不相等，但是typeof为Number</strong></p> <h3 id="_1"><a href="#_1" class="header-anchor">#</a> 1</h3> <div class="language- extra-class"><pre class="language-text"><code>let x = 5;
function fn(x) {
    return function(y) {
        console.log(y + (++x));
    }
}
let f = fn(6);
f(7);
fn(8)(9);
f(10);
console.log(x);
</code></pre></div><p>注意即使是同一个函数运行两次也会各自创建不同的执行上下文</p> <h3 id="_2"><a href="#_2" class="header-anchor">#</a> 2.</h3> <div class="language- extra-class"><pre class="language-text"><code>let x = 5;
function fn() {
    return function(y) {
        console.log(y + (++x));
    }
}
let f = fn(6);
f(7);
fn(8)(9);
f(10);
console.log(x);
</code></pre></div><p>注意不传值不建立形参则沿着作用域向上招到全局中的x</p> <h3 id="_3"><a href="#_3" class="header-anchor">#</a> 3.</h3> <p>好题</p> <div class="language- extra-class"><pre class="language-text"><code>let a=0,
    b=0;
function A(a){
    A=function(b){
        alert(a+b++);
    };
    alert(a++);
}
A(1);
A(2);
</code></pre></div><p>第一次A执行的是定义在全局上下文中的A，在执行A的过程中A变量被重新赋值给了另外一个函数，由于这个函数是在局部执行上下文中定义且A调用，所以构成闭包，该执行环境不出栈，保留形参变量a.
第二次执行A时会沿着作用域链找到a并执行函数，执行完毕后会出栈</p> <h3 id="_4"><a href="#_4" class="header-anchor">#</a> 4.</h3> <div class="language- extra-class"><pre class="language-text"><code>var x = 3,
    obj = {x: 5};
obj.fn = (function () {
    this.x *= ++x;
    return function (y) {
        this.x *= (++x)+y;
        console.log(x);
    }
})();
var fn = obj.fn;
obj.fn(6);
fn(4);
console.log(obj.x, x);
</code></pre></div><p>*<em>注意this的指向和 x <em>= ++x 应该先算x再算++x</em></em></p> <h3 id="_1-编写一个add函数满足如下需求"><a href="#_1-编写一个add函数满足如下需求" class="header-anchor">#</a> 1.编写一个ADD函数满足如下需求</h3> <div class="language- extra-class"><pre class="language-text"><code>add(1);       //1
add(1)(2);    //3
add(1)(2)(3); //6
add(1)(2,3);  //6
add(1,2)(3);  //6
add(1,2,3);   //6
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>/*
 * 实现方案一 
 */
/* function add(...outerArgs) {
	add = function (...innerArgs) {
		outerArgs.push(...innerArgs);
		return add;
	};
	add.toString = function () {
		return outerArgs.reduce((x, y) =&gt; x + y);
	};
	return add;
}
let res = add(1, 2)(3)(4)(5)(6, 7);
alert(res);  //=&gt;alert会把输出的值转换为字符串（toString()） */
/*
 * 第一次执行ADD  outerArgs=[1,2]  重写了ADD
 * 第二次执行ADD  innerArgs=[3]   outerArgs=[1,2,3]
 * 第三次执行ADD  innerArgs=[4]   outerArgs=[1,2,3,4]
 * ......
 * outerArgs=[1,2,3,4,5,6,7]
 */
// console.log(res.toString());


/*
 * 实现方案二 
 */
function currying(anonymous, length) {
	return function add(...args) {
		if (args.length &gt;= length) {
			return anonymous(...args);
		}
		return currying(anonymous.bind(null, ...args), length - args.length);
	}
}
let add = currying(function anonymous(...args) {
	return args.reduce((x, y) =&gt; x + y);
}, 4);
/*
 * AO(currying) 
 *   anonymous=求和函数
 *   length=4
 * ADD第一次执行  args=[1,2]
 *   currying第二次执行
 * 		anonymous=求和函数 预先传递的参数[1,2]
 *      length=2
 * 	 ADD第二次执行 args=[3]
 *      currying第三次执行 
 *        anonymous=求和函数 预先传递的参数[3]
 *        length=1
 *      ADD函数第三次执行 args=[4]
 *        把上一次的求和函数执行(4)
 */
console.log(add(1, 2,3)(3)(4));
</code></pre></div><h3 id="_2-下面代码输出结果是什么-为啥"><a href="#_2-下面代码输出结果是什么-为啥" class="header-anchor">#</a> 2.下面代码输出结果是什么？为啥？</h3> <div class="language- extra-class"><pre class="language-text"><code>let obj = {
    2: 3,
    3: 4,
    length: 2,
    push: Array.prototype.push
}
obj.push(1);
obj.push(2);
console.log(obj);
</code></pre></div><ul><li>调用了Array中的push方法，对length属性作出了修改
<ul><li><strong>obj[]的形式可以读或者是修改已有的或者是添加没有的，其中的值若是变量则找到变量对应的值变成字符串，若是常量则直接变成字符串</strong></li> <li><strong>obj.xxx的形式可以读也可以写没有的属性，其中的值只能是除了纯数字以外的obj中的属性值，且不加'',所以若为纯数字的属性值只能通过[]进行访问且不能直接无中生有</strong></li></ul></li> <li>push方法的实现原理</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Array.prototype.push = function push(num) {
	//=&gt;this:arr
	//this.length=this.length||0;
	//=&gt;拿原有length作为新增项的索引
	this[this.length] = num;
	//=&gt;length的长度会自动跟着累加1
};
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>/* let obj = {
	2: 3,
	3: 4,
	length: 2,
	push: Array.prototype.push
};
obj.push(1); //=&gt;obj[2]=1  obj.length=3
obj.push(2); //=&gt;obj[3]=2  obj.length=4
console.log(obj); //=&gt;{2:1,3:2,length:4...} */
</code></pre></div><p>对于obj[length]的对象其实会取到obj[2]这个属性</p> <h3 id="_3-a等于什么值会让下面条件成立"><a href="#_3-a等于什么值会让下面条件成立" class="header-anchor">#</a> 3.a等于什么值会让下面条件成立</h3> <div class="language- extra-class"><pre class="language-text"><code>var a = ?;
if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
    console.log('OK');
}
</code></pre></div><p>方案一：利用比较的时候默认会转化为字符串的机制，我们通过重写toString来完成需求
1.1</p> <div class="language- extra-class"><pre class="language-text"><code>var a = {
	i: 0,
	toString() {
		return ++this.i;
	}
};
//=&gt;a == 1 ：a.toString()
if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
	console.log('OK');
}
</code></pre></div><p>1.2</p> <div class="language- extra-class"><pre class="language-text"><code>var a = [1, 2, 3];
a.toString = a.shift;
if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
	console.log('OK');
}
</code></pre></div><p>方案二： Object.defineProperty劫持对象中某个属性的操作</p> <div class="language- extra-class"><pre class="language-text"><code>var i = 0;
Object.defineProperty(window, 'a', {
	get() {
		//=&gt;获取window.a的时候触发
		return ++i;
	},
	set() {
		//=&gt;给window.a设置属性值的时候触发
	}
});
if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
	console.log('OK');
} 
</code></pre></div><h3 id="_4-写出下面代码执行输出的结果"><a href="#_4-写出下面代码执行输出的结果" class="header-anchor">#</a> 4.写出下面代码执行输出的结果</h3> <div class="language- extra-class"><pre class="language-text"><code>function C1(name) {
    if (name) {
        this.name = name;
    }
}
function C2(name) {
    this.name = name;
}
function C3(name) {
    this.name = name || 'join';
}
C1.prototype.name = 'Tom';
C2.prototype.name = 'Tom';
C3.prototype.name = 'Tom';
alert((new C1().name) + (new C2().name) + (new C3().name));
</code></pre></div><p>若没有这个属性，在原型上找，若有的花用自己实例上的</p> <h3 id="_5-写出下面代码执行输出的结果-x"><a href="#_5-写出下面代码执行输出的结果-x" class="header-anchor">#</a> 5.写出下面代码执行输出的结果 x</h3> <div class="language- extra-class"><pre class="language-text"><code>function Foo() {
    getName = function () {
        console.log(1);
    };
    return this;
}
Foo.getName = function () {
    console.log(2);
};
Foo.prototype.getName = function () {
    console.log(3);
};
var getName = function () {
    console.log(4);
};
function getName() {
    console.log(5);
}
Foo.getName();//2
getName();//4 输出5的先是被提升然后在执行阶段被4覆盖
Foo().getName();//1 执行Foo()时并没有声明一个私有getName而是沿着作用域链到全局中修改了getName的指向，指向1,返回windows对象获取全局中的getName()
getName();//1
new Foo.getName();//2 new Foo的优先级比.低，所以先找到Foo中输出2的getName，然后再new生成实例的过程中输出2
new Foo().getName();//3 new Foo()的优先级和.一样，从左到右执行，先生成一个Foo实例为一个空对象，再沿着原型链向上找到getName()函数为输出3的函数
new new Foo().getName();//3 先new Foo()生成一个空实例，在沿原型链向上找到原型上的getName(),再执行 外侧 的new生成原型上getName()的实例并同时输出了3
</code></pre></div><p><strong>注意：</strong> <strong>1:首先应该变量提升，输出5的getName会被提升，且被提升后在函数执行阶段就不会再执行</strong> <strong>2:new的时候会改变this的指向，指向生成的空对象</strong> <strong>3:函数中没有的参数会沿着作用域链向上查找，而对象实例中没有的属性会沿着原型链向上查找</strong></p> <h3 id="_6-编写plus和minus实现如下需求"><a href="#_6-编写plus和minus实现如下需求" class="header-anchor">#</a> 6.编写plus和minus实现如下需求</h3> <div class="language- extra-class"><pre class="language-text"><code>~ function anonymous(proto) {
	const checkNum = function checkNum(num) {
		num = Number(num);//对一个数据进行强制转换
		if (isNaN(num)) {//用isNaN检验转换的结果
			num = 0;
		}
		return num;
	};
	proto.plus = function plus(num) {
		//=&gt;this:我们要操作的那个数字实例（对象）
		//=&gt;返回Number类的实例，实现链式写法
		return this + checkNum(num);
	};
	proto.minus = function minus(num) {
		return this - checkNum(num);
	};
}(Number.prototype);
// let n = 10;
// let m = n.plus(10).minus(5);
// console.log(m); //=&gt;15（10+10-5）
</code></pre></div><ul><li>将里面的函数返回给全局的Number.prototype从而构成了闭包实现了对checkNum方法的私有包装</li> <li>将checkNum提取出来实现了代码的去冗余</li> <li>代码的编写先实现功能，再去除冗余，再实现私有包装和可扩展性</li></ul> <h3 id="百度笔试题"><a href="#百度笔试题" class="header-anchor">#</a> 百度笔试题</h3> <h4 id="_1-promise实例状态无更改"><a href="#_1-promise实例状态无更改" class="header-anchor">#</a> 1.promise实例状态无更改</h4> <div class="language- extra-class"><pre class="language-text"><code>(async()=&gt;{
    console.log(1);
    setTimeout(()=&gt;{
        console.log(2);
    },0);
    await new Promise((resolve,reject)=&gt;{
        console.log(3);
    }).then(()=&gt;{
        console.log(4);
    });
    console.log(5);
})();
</code></pre></div><p>输出结果为1，3，2
注意此时的await后面的promise实例并没有执行resolve或者是reject方法，由此并没有改变状态，所以then中的语句会一直等待，console.log(5)同样也会一直等待</p> <div class="language- extra-class"><pre class="language-text"><code>(async()=&gt;{
    console.log(1);
    setTimeout(()=&gt;{
        console.log(2);
    },0);
    await new Promise((resolve,reject)=&gt;{
        console.log(3);
        resolve();
    }).then(()=&gt;{
        console.log(4);
    });
    console.log(5);
})();
</code></pre></div><p>若为这样则结果为1,3,4,5,2 注意4在5前，2作为宏任务会在后面</p> <h4 id="_2-return的自动加-问题"><a href="#_2-return的自动加-问题" class="header-anchor">#</a> 2.return的自动加;问题</h4> <div class="language- extra-class"><pre class="language-text"><code>function nums(a,b){
    if
    (a &gt; b)
    console.log('a is bigger')
    else
    console.log('b is bigger')
    return     
    a + b
}

console.log(nums(4,2))
console.log(nums(1,2))
</code></pre></div><p>这时这个return语句会变成</p> <div class="language- extra-class"><pre class="language-text"><code>return;
a+b
</code></pre></div><p>所以结果为 a is bigger undefined b is bigger undefined</p> <h3 id="循环中处理异步的问题"><a href="#循环中处理异步的问题" class="header-anchor">#</a> 循环中处理异步的问题</h3> <h4 id="_1-使用for循环"><a href="#_1-使用for循环" class="header-anchor">#</a> 1.使用for循环</h4> <div class="language- extra-class"><pre class="language-text"><code>let arr = [1, 2, 3];

function delay() {

    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve();
        }, 1000);
    })
}

async function f() {
    console.log('start');
    for(let i = 0;i &lt; 3;i++){
        await delay();
        console.log(arr[i]);
    }
    console.log('end');
}

f();
</code></pre></div><p>结果为 start 1(等待1s)2(等待1s)3 end
for循环中的异步会使得整个循环任务进入任务队列</p> <h4 id="_2-使用foreach循环"><a href="#_2-使用foreach循环" class="header-anchor">#</a> 2.使用forEach循环</h4> <div class="language- extra-class"><pre class="language-text"><code>let arr = [1, 2, 3];

function delay() {

    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve();
        }, 1000);
    })
}

function f() {
    console.log('start');
    arr.forEach(async function (item) {
        await delay();
        console.log(item);
    })
    console.log('end');
}

f();
</code></pre></div><p>注意forEach循环要把async写在回调函数中，并且是每一次函数内部中的任务被加到微任务队列中
结果为start end (等待1s) 1 2 3</p> <h4 id="_3-for-of循环"><a href="#_3-for-of循环" class="header-anchor">#</a> 3.for..of循环</h4> <div class="language- extra-class"><pre class="language-text"><code>let arr = [1, 2, 3];

function delay() {

    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve();
        }, 1000);
    })
}

async function f() {
    console.log('start');
    for(let item of arr){
        await delay();
        console.log(item);
    }
    console.log('end');
}

f();
</code></pre></div><p>for..of与for循环相同</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/js/js_ks/js_ks.html" class="prev">
        JS知识点总结
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.09d10d22.js" defer></script><script src="/docs/assets/js/5.2d095b72.js" defer></script><script src="/docs/assets/js/27.a9c08176.js" defer></script>
  </body>
</html>
